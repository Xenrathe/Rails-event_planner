<div class="User">
  <h1><%= @user.username %>'s Adventures</h1>

  <h2>Created Adventures:</h2>
  <ul>
    <% @owned_adventures.each do |adventure|%>
      <li> <%= adventure.name %>
    <% end %>
  </ul>

  <% past_attendances = [] %>
  <% upcoming_attendances = [] %>
  <% @attended_adventures.each do |attendance|%>
    <% if attendance.adventure.date >= Date.today %>
      <% upcoming_attendances << attendance %>
    <% else %>
      <% past_attendances << attendance %>
    <% end %>
  <% end %>

  <h2>Upcoming Adventures:</h2>
  <ul>
    <% upcoming_attendances.each do |attendance|%>
      <li> <%= attendance.adventure.name %> on <%= attendance.adventure.date %>, character: <%= attendance.character.name %>
    <% end %>
  </ul>

  <h2>Past Adventures:</h2>
  <ul>
    <% past_attendances.each do |attendance|%>
      <li> <%= attendance.adventure.name %> on <% attendance.adventure.date %>, character: <%= attendance.character.name %>
    <% end %>
  </ul>

  <h2><%= @user.username %>'s Characters</h2>
  <ul>
    <% @characters.each do |character|%>
      <li> <%= link_to character.name, character_path(character) %>: A level <%= character.level %> <%= character.gender %> <%= character.race %> <%= character.character_class %> (<%= character.ruleset %>)
      <% if character == @active_character %>
        [active]
      <% else %>
        <%= link_to "[set active]", set_active_character_path(character), method: :patch, data: { turbo_method: :patch } %>
      <% end %>
    <% end %>
  </ul>
</div>