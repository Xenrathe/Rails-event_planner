# Sample addresses
addresses = [
  "123 Elf Lane",
  "456 Neon Road",
  "789 Cthulhu Rd.",
  "890 Xeno Street",
  "Galaxy station",
  "Games 'R Us",
  "", # Blank address
]

bios = [
  "Been a DM since the day I was born!",
  "Above all, I love winning. I love the smell of Fireball... smells like victory.",
  "I play so much that I dream of rolling dice. Over and over and over, that's why I dream.",
  "I'm like the Ash Ketchum of tabletop games. He gotta catch em all. Well, I gotta play em all",
  "I am cat.",
  "A story is like a good onion. It has layers, y'know?",
  "ROARRRRRR!!!!!!!",
  "TableTop initialized. Running checks... Checks confirmed. Spinning up story... Story spun. GAME GO!",
  "StarDate 2024 - We have arrived at a planet of games. In order to obey the prime directive, we must blend in. In order to blend, we must game.",
  "A boy has the right to dream. There are endless possibilities stretched out before him. What awaits him down the path, he will then have to choose. The boy doesn't always know. At some point, the boy then becomes an adult and learns what he was able to become. Joy and sadness forever will accompany this. He is confronted with a choice - when this happens, does he bid his past farewell in his heart? Once a boy becomes an adult, he can no longer go back to being a boy. The boy is now a man. Only one thing can be said: A boy has the right to dream, for those endless possibilities are stretched out before him. We must remember, all men were once boys.",
  "Dwell on the beauty of life. Watch the stars, and see yourself running with them.",
  "I see a squirrel. Therefore, I chase squirrel.",
  "I am the Prince of Dogs.",
  "I dress for success, I dress for victory, but most of all, I dress to impress."
]

usernames = [
  "DM4Ever",
  "Fireball Maniac",
  "Dice Dreamer",
  "Professor Play",
  "Cheshire",
  "Wannabe-Shrek",
  "DRAGON",
  "GameRunner",
  "Cpt. Space",
  "Narrator",
  "PhilosopherGM",
  "Legend",
  "Atlas",
  "Tuxedo Man"
]

character_names = [
  "Gandalf",
  "Frodo",
  "Aragorn",
  "Legolas",
  "Gimli",
  "Luke Skywalker",
  "Darth Vader",
  "Princess Leia",
  "Han Solo",
  "Obi-Wan Kenobi",
  "Bilbo Baggins",
  "Thorin Oakenshield",
  "Tyrion Lannister",
  "Daenerys Targaryen",
  "Arya Stark",
  "Jon Snow",
  "Harry Potter",
  "Hermione Granger",
  "Gollum",
  "Yoda",
  "Spock",
  "Captain Kirk",
  "Uhura",
  "Chewbacca",
  "Dumbledore",
  "Voldemort",
  "Elrond",
  "Legolas",
  "Sauron",
  "Arwen",
  "Qui-Gon Jinn",
  "Padm√© Amidala",
  "Anakin Skywalker",
  "Mace Windu",
  "R2-D2",
  "C-3PO"
]

character_races = [
  # Fantasy Races
  "Elf", "Dwarf", "Orc", "Human", "Halfling", "Goblin", "Dragonborn", "Gnome", "Tiefling", "Half-elf",
  # Sci-Fi Races
  "Human (transcended)", "Android", "Vulcan", "Wookiee", "Trill", "Klingon", "Asari", "Zabrak", "Twi'lek", "Salarian",
  # Monster Races
  "Vampire", "Werewolf", "Zombie", "Mummy", "Ghost", "Troll", "Ogre", "Minotaur", "Banshee", "Yeti"
]

character_classes = [
  # Fantasy Classes
  "Wizard", "Warrior", "Rogue", "Cleric", "Paladin", "Barbarian", "Sorcerer", "Bard", "Druid", "Monk",
  # Sci-Fi Classes
  "Space Marine", "Cyborg", "Telepath", "Engineer", "Assassin", "Pilot", "Robot", "Scientist", "Bounty Hunter", "Medic",
]

character_backstories = [
  "Orphaned at a young age, raised by forest creatures.",
  "An exiled noble seeking redemption.",
  "Survivor of a fallen kingdom, seeking revenge.",
  "Apprenticed to a legendary blacksmith.",
  "Forsaken by their order, seeking truth and justice.",
  "A former pirate captain turned peaceful trader.",
  "An amnesiac with mysterious magical abilities.",
  "Once a famous performer, now a hermit seeking solace.",
  "Cursed with an ancient family affliction.",
  "Trained as an assassin from a young age."
]

adventure_names = [
  "Raid on the Diamond Mine",
  "Betrayal on Neon Street",
  "The Forbidden Temple of Azura",
  "Witch Hunt in Darkwood",
  "The Siege of Ironhold",
  "The Enigma of the Crystal Caves",
  "Curse of the Shadow Isles",
  "Beneath the Tangled Depths",
  "The Lost City of Atlantis",
  "Dungeons of the Forsaken King",
  "Festival of the Five Moons",
  "Nightmare in Neverland",
  "The Phantom Menace of Elmsworth",
  "Heist at the High Tower",
  "Labyrinth of Eternal Echoes",
  "The Clockwork Conspiracy",
  "Voyage to the Edge of Eternity",
  "Shadows Over Scarlet Harbor",
  "Echoes of the Elven Empire",
  "The Last Stand at Crimson Keep"
]

adventure_descriptions = [
  "The party embarks on a perilous journey to raid the Diamond Mine, in search of untold fortunes guarded by ferocious beasts.",
  "A treacherous tale of betrayal unfolds on Neon Street, leading the party into a harrowing conflict of loyalty and deception.",
  "Explore the Forbidden Temple of Azura, uncovering lost secrets and facing ancient curses lurking within its mystical walls.",
  "In the dark woods, a perilous witch hunt begins, revealing a sinister plot that endangers both witch and hunter alike.",
  "The party takes a stand against an overwhelming siege on the mighty Ironhold, defending it from all who seek its destruction.",
  "Unravel the enigma concealed within the Crystal Caves, where a tale of untold mystery and hidden treasures awaits.",
  "A journey begins to break the cursed Shadow Isles' malevolent spell, confronting the haunted souls that haunt this dreaded land.",
  "Delve beneath the tangled depths, where ancient ruins and forgotten relics await discovery, guarded by lurking perils.",
  "Embark on an epic quest to rediscover the fabled Lost City of Atlantis and reveal its fathomless mysteries buried in time.",
  "Venture into the dungeons of the Forsaken King, overcoming dangerous trials in pursuit of the king's lost treasures.",
  "The festival of the Five Moons unites diverse cultures, but as darkness looms, the party must uncover a shadowy conspiracy.",
  "Face the surreal nightmare lurking in the mysterious Neverland, where perilous challenges challenge the very fabric of reality.",
  "Investigate the mysterious Phantom Menace of Elmsworth, uncovering the ghostly secrets haunting the town's streets.",
  "Master the art of a heist at the High Tower, navigating intricate puzzles and dodging the watchful eyes of the tower's guards.",
  "Navigate the labyrinth of Eternal Echoes, where ancient spirits beckon and riddles lead to forgotten realms.",
  "Unravel the Clockwork Conspiracy as the party faces challenges to disrupt the mechanical schemes threatening the kingdom.",
  "Embark on a mysterious voyage to the Edge of Eternity, where cosmic wonders and enigmatic realms await discovery.",
  "Navigate the shadowy streets of Scarlet Harbor, uncovering a sinister plot that threatens the city's peace.",
  "Echoes of the Elven Empire resound through ancient ruins, carrying with them secrets and enigmas of an age long past.",
  "Defend the Last Stand at Crimson Keep, an epic battle to protect the stronghold from overwhelming adversaries."
]

14.times do |i|
  user = User.new(
    email: "user#{i + 1}@example.com",
    password: "password",
    birthdate: Date.today - (21 + i).years,
    bio: bios[i],
    username: usernames[i]
  )

  if user.save
    gender_num = (rand(0..65) / 30).to_i

    rand(3..6).times do
      directory = 'app/assets/images/portraits/'
      user.characters.create(
        name: character_names.sample,
        race: character_races.sample,
        character_class: character_classes.sample,
        level: rand(1..15),
        gender: gender_num,
        backstory: character_backstories.sample, 
        ruleset: rand(0..9),
        portrait_path: case gender_num
                       when 0
                         File.basename(Dir.glob("#{directory}*male*.jpg").sample)
                       when 1
                         File.basename(Dir.glob("#{directory}*female*.jpg").sample)
                       else
                         File.basename(Dir.glob("#{directory}*other*.jpg").sample)
                       end
      )
      
    end
    user.active_character = user.characters.sample
  else
    puts "User not saved: #{user.errors.full_messages.join(', ')}"
  end
end

# Create Adventures
30.times do
  adventure_num = rand(0..19)
  level_num = rand(1..13)
  maxseat_num = rand(3..9)
  adventure = Adventure.new(
    date: DateTime.now + rand(1..12).months + rand(0..28).days + rand(0..1440).minutes,
    name: adventure_names[adventure_num],
    description: adventure_descriptions[adventure_num],
    creator: User.all.sample,
    ruleset: rand(0..9),
    platform: rand(0..11),
    max_seats: maxseat_num,
    min_age: rand(10..21),
    min_level: level_num,
    max_level: level_num + rand(2..4),
    address: addresses.sample,
    is_private: false
  )

# Attendees for the adventure (filtered characters)
  if adventure.save
    attendees = Character.joins(:user).where(
      "users.birthdate <= ? AND characters.level >= ? AND characters.level <= ? AND characters.ruleset = ? AND users.id != ?",
      adventure.date - adventure.min_age.years,
      adventure.min_level,
      adventure.max_level,
      Adventure.rulesets[adventure.ruleset],
      adventure.creator_id
    ).sample(rand(3..maxseat_num))

    attendees.each { |character| adventure.attendees << character }
  end
end
